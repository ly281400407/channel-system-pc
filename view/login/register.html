<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>注册</title>
    <script>
        if (typeof module === 'object') { window.module = module; module = undefined; }
    </script>
    <script src="../../js/jquery-3.2.1.js"></script>
    <script>
        if (window.module) module = window.module;
    </script>
    <link rel="stylesheet" href="../../css/login/register.css">
</head>

<body>
<div class="container">
    <ul class="regt">
        <li class="logo">
            <span>欢迎注册悦商云</span>
        </li>
        <li class="position">
            <input id="account" autocomplete="off" class="user" placeholder="请输入账号">
            <input id="pwd" autocomplete="off" class="pwd" placeholder="请输入密码">
            <input id="phonenumber" autocomplete="off" placeholder="手机号码">
            <input id="verifyCode" autocomplete="off" placeholder="手机验证码">
            <a id="getVerifyCode" class="getbtn">获取</a>
        </li>
        <li>
            <a class="login" id="register">注&nbsp;册</a>
        </li>
    </ul>
    <ul class="complate hidden">
        <li class="success">
            <span>恭喜你！注册成功</span>
            <span>请完善你的店铺信息，即刻开始收银！</span>
        </li>
        <li class="position">
            <input autocomplete="off" class="user" placeholder="店名">
            <input autocomplete="off" class="adr" placeholder="地址" readonly>
            <input autocomplete="off" placeholder="详细地址">
            <input autocomplete="off"  class="industry" placeholder="行业" readonly>
            <input autocomplete="off" placeholder="邮箱">
            <div class="address hidden">
                <ul>
                    <li>广东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                    <li>山东省</li>
                    <li>河南省</li>
                    <li>湖南省</li>
                </ul>
                <ul>
                    <li>广州市</li>
                    <li>深圳市</li>
                    <li>珠海市</li>
                    <li>汕头市</li>
                    <li>韶关市</li>
                    <li>佛山市</li>
                    <li>江门市</li>
                    <li>湛江市</li>
                    <li>茂名市</li>
                    <li>肇庆市</li>
                    <li>肇庆市</li>
                    <li>惠州区</li>
                    <li>梅州区</li>
                    <li>汕尾区</li>
                    <li>河源区</li>
                    <li>阳江区</li>
                    <li>清远区</li>
                    <li>东莞区</li>
                </ul>
                <ul class="area">
                    <li>福田区</li>
                    <li>罗湖区</li>
                    <li>南山区</li>
                    <li>宝安区</li>
                    <li>龙岗区</li>
                    <li>盐田区</li>
                    <li>其他</li>
                </ul>
            </div>
            <div class="indu hidden">
                <ul>
                    <li>计算机/互联网/通信/电子</li>
                    <li>会计/金融/银行/保险</li>
                    <li>贸易/消费/制造/营运</li>
                    <li>制药/医疗</li>
                    <li>广告/媒体</li>
                    <li>房地产/建筑</li>
                    <li>专业服务/教育/培训</li>
                    <li>服务业</li>
                    <li>物流/运输</li>
                    <li>能源/原材料</li>
                    <li>政府/非赢利机构/其他</li>
                </ul>
            </div>
        </li>
        <li>
            <a class="login" id="startUse">开始使用</a>
        </li>
    </ul>
    <img src="../../img/banner.png" class="banner">
</div>

<script src="../../js/login.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#getVerifyCode").click(function () {
            var phonenumber = $("#phonenumber").val();
            getVerifyCode(phonenumber);
        });
        $(document).ready(function () {
            $("#register").click(function () {
                var account = $("#account").val();
                var pwd = $("#pwd").val();
                var phonenumber = $("#phonenumber").val();
                var verifycode = $("#verifycode").val();
                userRegister(account, pwd, phonenumber, verifycode);
            });
        });
    })
    function getVerifyCode(phonenumber) {
        $.ajax({
            type: "get",    //请求方式
            async: true,    //是否异步
            url: "http://localhost:8080/verificationCode",
            dataType: "jsonp",    //跨域json请求一定是jsonp
            //jsonp:"callbackone",
            //jsonpCallback:"successCallback",    //自定义跨域参数值，回调函数名也是一样，默认为jQuery自动生成的字符串
            data: {
                phone: phonenumber
            },    //请求参数
            beforeSend: function () {
                //请求前的处理
            },
            success: function (data) {
                /* if (data.user != null) {
                    $("#queryUser").html(data.user);
                    $("#queryPassword").html(data.password);
                } else {
                    $("#queryUser").html("");
                    $("#queryPassword").html("");
                } */
            },
            complete: function () {
                //请求完成的处理
            },
            error: function () {
                //请求出错处理
            }
        });
    }
    function userRegister(account, pwd, phonenumber, verifycode) {
        $.ajax({
            type: "POST",    //请求方式
            async: true,    //是否异步
            url: "http://localhost:8080//tenant",
            //dataType: "jsonp",    //跨域json请求一定是jsonp
            //jsonp:"callbackone",
            //jsonpCallback:"successCallback",    //自定义跨域参数值，回调函数名也是一样，默认为jQuery自动生成的字符串
            data: {
                accountName: account,
                pwd: pwd,
                phone: phonenumber,
                verificationCode: verifycode
            },    //请求参数
            beforeSend: function () {
                //请求前的处理
            },
            success: function (data) {
                /* if (data.user != null) {
                    $("#queryUser").html(data.user);
                    $("#queryPassword").html(data.password);
                } else {
                    $("#queryUser").html("");
                    $("#queryPassword").html("");
                } */
            },
            complete: function () {
                //请求完成的处理
                $(".regt").addClass("hidden");
                $(".complate").removeClass("hidden");
            },
            error: function () {
                //请求出错处理
                console.log("注册失败");
            }
        });
    }
</script>
</body>
</html>